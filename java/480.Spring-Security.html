<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><title>Spring-Security | ğ“›ğ“²ğ“·ğ”‚ğ“¬çš„å°ç«™</title><meta name="description" content="è¾“å‡ºæ˜¯æœ€å¥½çš„è¾“å…¥ï¼Œè®°å½•æ¯ä¸€åˆ»">
    <link rel="preload" href="/vuepress-next-blog/assets/style-4668e34c.css" as="style"><link rel="stylesheet" href="/vuepress-next-blog/assets/style-4668e34c.css">
    <link rel="modulepreload" href="/vuepress-next-blog/assets/app-49117bc2.js"><link rel="modulepreload" href="/vuepress-next-blog/assets/framework-c8e009f3.js"><link rel="modulepreload" href="/vuepress-next-blog/assets/480.Spring-Security.html-480ff4c6.js"><link rel="modulepreload" href="/vuepress-next-blog/assets/480.Spring-Security.html-cbdbab72.js"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-5d0a4d1e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.é›¶å®½å­—ç¬¦.html-00b40813.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.å­—ç¬¦ç¼–ç .html-4e0064dc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-835fd6c1.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.åŠ¨ç”».html-f575c100.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.flex.html-d3914956.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.media.html-ca3fb9cf.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/15.é•¿åº¦å•ä½.html-81cfaabe.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.å¤šä¸ªå±æ€§å€¼ä¼˜å…ˆå±•ç¤ºå“ªä¸€ä¸ªï¼Ÿ.html-7e9bfaf7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/25.cssçš„è§£æè¿‡ç¨‹.html-adb1b41c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-60055e57.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.èµ·æ­¥.html-fce98c9d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.å¼‚å¸¸å¤„ç†.html-45658db4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/110.classPath.html-9b988710.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/120.package.html-a9dc8d2f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/130.jarå’Œæ¨¡å—.html-f5a97b38.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/140.æ³¨è§£ä¸åå°„.html-d39d2348.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/150.é¢å‘å¯¹è±¡åŸºç¡€.html-56582c72.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/160.å¤šçº¿ç¨‹.html-86b0d46e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/170.maven.html-5a3b1d37.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/180.å‡½æ•°å¼ç¼–ç¨‹.html-2f85a836.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/190.IO.html-aed1b9f0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.ç±».html-b8494e61.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/200.JDBC.html-b7c756b4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/250.å¸¸ç”¨æ–¹æ³•.html-84f8921a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/300.è®¾è®¡æ¨¡å¼.html-90751a8f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/400.Spring.html-1a8442f4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/410.Spring-æ•°æ®åº“.html-a30a8e2e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/420.Spring-Hibernate.html-ddd02a98.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/430.webå¼€å‘åŸºç¡€.html-9091457c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/440.Spring-Webå¼€å‘.html-4c86b2ab.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/450.Spring-Boot.html-10ea50ec.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/470.Spring-Data-JPA.html-7410219f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.éšæœºæ•°.html-77d62c15.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.æšä¸¾ç±».html-986c55bd.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/600.ä¸€äº›åè¯.html-d0cad7f6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.è®°å½•ç±».html-0bb08aca.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.å…¶ä»–ç±»ç›¸å…³çš„çŸ¥è¯†.html-f45b05b2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/90.String.html-88470c08.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-2b98e0b5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-74a2d033.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç§Ÿæˆ¿çŸ¥è¯†ç¬”è®°.html-d4580141.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.èŒåœºçŸ¥è¯†.html-37a3062a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05. é¢è¯•.html-a30ac503.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-b2b86abb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.Vscodeé…ç½®å¼€å‘ç¯å¢ƒ.html-014364e7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.æ•°æ®ç±»å‹.html-96de38b2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.æ“ä½œç¬¦.html-b9fc7191.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.å‡½æ•°.html-69b08084.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.æ¨¡å—.html-53a53e16.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.é¢å‘å¯¹è±¡ç¼–ç¨‹.html-ce2199ff.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.è£…é¥°å™¨è¯¦è§£.html-486350ae.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/08.ç®€å†™.html-179027e6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŒæ­¥é¡¹ç›®ä¾èµ–.html-6882b656.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-4d1698e0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-3e8a5c12.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŸºæœ¬ä½¿ç”¨.html-b5f183db.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.trait.html-d299795a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.æ‰€æœ‰æƒ.html-7f9327ac.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.ç»“æ„ä½“struct.html-e2047bec.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.æšä¸¾enumã€ç©ºå€¼Noneä¸match.html-9673bc2d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.åŒ…ã€crateå’Œæ¨¡å—.html-0c4d2396.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-0c319727.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-cfc960b2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.èµ·æ­¥.html-d9582ea5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.æŸ¥è¯¢.html-41073c0d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.æ“ä½œæ•°æ®åº“.html-783f1e1f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.äº‹åŠ¡.html-be80eae9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/11.mysqlè½¯ä»¶ä½¿ç”¨.html-01a58ac9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-78c60192.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/AHK.html-7eadf986.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/Chrome.html-f97f3958.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/Intellij-Idea.html-f3e5dd4f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/Listary.html-36c3b8ad.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-2f40b1e5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ffmpeg.html-732960e2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/notion.html-49ee4c81.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/vscode.html-f01a7e68.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-3da263b1.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.èµ·æ­¥.html-a5505bcc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.Babel ä¸ Loader.html-1dc654eb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.Css ä¸ Loader.html-91a2a94b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.Asset Modules.html-87bcc1b5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.resolve.html-c8d98f56.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.module-federation.html-99403da3.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-143eedee.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®­å¤´å‡½æ•°.html-862b83b5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Proxy.html-92ba2545.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.Reflect.html-c8b8cd6f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.è¿­ä»£å™¨.html-614be95c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.ç”Ÿæˆå™¨.html-6361e1aa.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.letä¸const.html-eaa193a5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-97743f5f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å…¥é—¨.html-8803d809.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.åŒ¹é…å™¨.html-91e7fed1.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.ç”Ÿå‘½å‘¨æœŸ.html-ab17847e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.å¼‚æ­¥æµ‹è¯•.html-18ca9f9e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-8596975b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.ç®€ä»‹.html-37a1914d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.æ³›å‹ã€å‡½æ•°ã€ç±»ä¸æ¥å£.html-a8eee1ca.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-c0c79570.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.é—­åŒ…ä¸è§‚å¯Ÿè€…æ¨¡å¼.html-74a2193e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-66e48ac2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.ç®€ä»‹.html-8b5c9a23.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.é˜²æŠ–èŠ‚æµ.html-531aea15.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-12722434.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.fs.html-0b48cf9e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.å›è°ƒå‡½æ•°.html-5048fdcb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.path.html-8ee6ca75.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.stream.html-637d9f90.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.signal.html-f61c1abc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.ä¸­é—´ä»¶.html-3789c2be.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/15.æ‰§è¡Œå‘½ä»¤è¡Œ.html-0f336fbb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-aa9adc23.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-5499240c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.å°†è§‚å¯Ÿè€…æ¨¡å¼ç”¨äºé¡µé¢æ¸²æŸ“.html-f41bbe74.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-22532f05.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-e9640600.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/äº”åˆ†é’ŸåŸåˆ™.html-f2b61db4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ä»€ä¹ˆæ ·çš„æ‚²å‰§ç”µå½±ä»¤äººåŠ¨å®¹.html-3cb94999.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ä»–äººå³åœ°ç‹±.html-444bf431.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/å¿ƒæµ.html-5d545e4a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/æŠ€æœ¯æ–‡ç« çš„ç»“æ„.html-701658d5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ç¬¬äºŒä¸ªå™©æ¢¦.html-1e88abc0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/è®¡åˆ’ä¸ºä½ å¸¦æ¥äº†ä»€ä¹ˆ.html-4adf7505.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-006f15b9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Redux-Toolkit.html-144b0165.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.åŸºæœ¬ä½¿ç”¨.html-df0b8d35.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.immer.html-642af037.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.redux-thunk.html-a7bcc6e9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.APIå¤‡å¿˜å½•.html-89a3ef75.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/15.æ ‡å‡†reduxæ¨¡å¼.html-ec01ee94.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.rtk-queryåŸºæœ¬ä½¿ç”¨.html-2ebfb386.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-d87ae788.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.ç®€ä»‹.html-9407b7ac.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å…¥é—¨.html-619a3034.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.useSWR.html-e6c22684.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.é¢„åŠ è½½.html-895da28b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.æ— é™åŠ è½½åˆ—è¡¨.html-53f1da33.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.é…ç½®å’Œæ¡ä»¶æ¸²æŸ“.html-331934db.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/08.ä¼ å…¥å‚æ•°.html-0907c8eb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-6dd64e18.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.æ‡’åŠ è½½.html-a5c5c182.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.ä¼˜åŒ–ç›¸å…³.html-727c6eab.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/110.ä¸€äº›å¸¸è§çš„å°é—®é¢˜.html-4f5164d2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/120.ä½ çœŸçš„å°†useEffectç”¨å¯¹åœ°æ–¹äº†å—.html-6a133f60.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.Transition.html-1cc64dff.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.useReducer.html-21074c21.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.HOC.html-c84629eb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.ref.html-37196622.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.suspense.html-12fc1f96.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.ErrorBoundary.html-8492a987.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.è‡ªå®šä¹‰hooks.html-3ae7b64e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/90.rule of hooks.html-66649ca4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-5be5db90.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å…¥é—¨.html-b6f41514.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Selectorè¯¦è§£.html-ce9f7751.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.æ•°æ®é¢„å–.html-3bb643e9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.snapshotå¿«ç…§.html-e8b11c31.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-186f46a2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŸºæœ¬ä½¿ç”¨.html-02b52c01.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.ssh.html-044f7861.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/110.clash.html-cc5435be.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.vim.html-964052e1.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/200.å¦‚ä½•ç”¨shellè„šæœ¬ç­¾å‡ºå›ºå®šçš„gitåˆ†æ”¯ï¼Ÿ.html-e4ba1f2f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.å¸¸ç”¨é…ç½®.html-15abbedc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.å¸¸ç”¨æ’ä»¶.html-54404230.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.bashè„šæœ¬.html-39302b74.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-b43f507d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŸºæœ¬æ¦‚å¿µ.html-fc53f9e3.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.nginx-conf.html-6f9a7eef.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.å¸¸ç”¨å‘½ä»¤.html-52eb49be.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.æ–°æ‰‹å¸¸è§é—®é¢˜.html-9fdae586.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-d767aeea.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.å¸¸ç”¨å‘½ä»¤.html-e8e941c2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.ocrmypdf.html-fcdb114f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.mysql.html-e189e0a8.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-99493207.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å¸¸ç”¨æŒ‡ä»¤.html-ae341e22.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.submodule.html-fd6cac7e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.gitHub-Cli.html-0c30dad9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-2d3e26ae.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.Nuxt3åˆ›å»ºé¡¹ç›®.html-f06d3e87.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-85dcee81.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.history.html-b4ef391a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-ec427d1b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.å“åº”å¼API-refs.html-ddd30fdd.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.teleport.html-bcdfc3ae.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.å“åº”å¼API-reactive.html-cb6fdff4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.å“åº”å¼API-computedå’Œwatch.html-88e4f864.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.ç»„åˆå¼API-ç®€ä»‹.html-ec0504cd.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.ç»„åˆå¼API-setup.html-40b88d48.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.ç»„åˆå¼API-setupè¯­æ³•ç³–.html-eb3aa4ce.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.v-model.html-b7cdd26f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.styleç‰¹æ€§.html-8d9692c0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-3538a14b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.data.html-622e6814.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.å“åº”å¼åŸç†.html-e00c9bac.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.æ¸²æŸ“å‡½æ•°ä¸h.html-4f76f7fe.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.emit.html-ee7e7815.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.attributeç»§æ‰¿.html-3e0fe43e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.ref.html-80c59521.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.computed.html-d4dddaeb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.slot.html-a543ddae.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-3ffd852e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-3e6ac385.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Store.html-7dc31a8d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.getter.html-d73fc71a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.subscribe.html-5e2fc1bb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.æ’ä»¶.html-452c8c00.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-a982cd75.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-d100ac2c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.State.html-6d4ecdab.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.getters.html-72829ef6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.mutation.html-c9ae5ed0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.actions.html-beff663b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.modules.html-127d4e4b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/07.ç»„åˆå¼API.html-f73fc2f2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/08.æ’ä»¶.html-df531366.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-39bc0f9e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/404.html-ca304e6c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-67b6ff9b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.é›¶å®½å­—ç¬¦.html-69ce9208.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.å­—ç¬¦ç¼–ç .html-0df3e00a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-93e332b6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.åŠ¨ç”».html-825e2c19.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.flex.html-39081d86.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.media.html-dcac84f8.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/15.é•¿åº¦å•ä½.html-af30db74.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.å¤šä¸ªå±æ€§å€¼ä¼˜å…ˆå±•ç¤ºå“ªä¸€ä¸ªï¼Ÿ.html-11dc7161.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/25.cssçš„è§£æè¿‡ç¨‹.html-a70b5ab0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-20caee36.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.èµ·æ­¥.html-19309e9e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.å¼‚å¸¸å¤„ç†.html-83faeddc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/110.classPath.html-2000ceaf.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/120.package.html-a9767877.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/130.jarå’Œæ¨¡å—.html-669ead89.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/140.æ³¨è§£ä¸åå°„.html-c19bef6e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/150.é¢å‘å¯¹è±¡åŸºç¡€.html-9d910ca4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/160.å¤šçº¿ç¨‹.html-dde19f4c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/170.maven.html-62775cbe.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/180.å‡½æ•°å¼ç¼–ç¨‹.html-daa4d0d3.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/190.IO.html-f08748d1.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.ç±».html-c0daecde.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/200.JDBC.html-788d9839.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/250.å¸¸ç”¨æ–¹æ³•.html-276ea358.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/300.è®¾è®¡æ¨¡å¼.html-db75c5e6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/400.Spring.html-364b1054.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/410.Spring-æ•°æ®åº“.html-af20d5a7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/420.Spring-Hibernate.html-48324b75.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/430.webå¼€å‘åŸºç¡€.html-43a0c9f5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/440.Spring-Webå¼€å‘.html-400a2d99.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/450.Spring-Boot.html-160d50af.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/470.Spring-Data-JPA.html-9cde0444.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.éšæœºæ•°.html-d62f9662.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.æšä¸¾ç±».html-ba09be51.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/600.ä¸€äº›åè¯.html-692ef087.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.è®°å½•ç±».html-430297df.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.å…¶ä»–ç±»ç›¸å…³çš„çŸ¥è¯†.html-51b02bf0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/90.String.html-ced1b639.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-6980fc86.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-76bbad90.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç§Ÿæˆ¿çŸ¥è¯†ç¬”è®°.html-083491d5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.èŒåœºçŸ¥è¯†.html-61a7ba79.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05. é¢è¯•.html-eadb8f42.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-ac73d81d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.Vscodeé…ç½®å¼€å‘ç¯å¢ƒ.html-aaca921f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.æ•°æ®ç±»å‹.html-3fd60ac6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.æ“ä½œç¬¦.html-65dee8a4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.å‡½æ•°.html-6f65e16c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.æ¨¡å—.html-191c746a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.é¢å‘å¯¹è±¡ç¼–ç¨‹.html-c43e7b7b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.è£…é¥°å™¨è¯¦è§£.html-08a8b3da.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/08.ç®€å†™.html-828f3fe6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŒæ­¥é¡¹ç›®ä¾èµ–.html-5329565d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-2cb96817.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-03998528.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŸºæœ¬ä½¿ç”¨.html-500eb761.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.trait.html-d5ca6ce2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.æ‰€æœ‰æƒ.html-295cca9c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.ç»“æ„ä½“struct.html-0e09df93.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.æšä¸¾enumã€ç©ºå€¼Noneä¸match.html-c4377081.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.åŒ…ã€crateå’Œæ¨¡å—.html-ea1a75d9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-11ba67d7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-4d215fed.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.èµ·æ­¥.html-7c3c2e05.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.æŸ¥è¯¢.html-3c50b915.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.æ“ä½œæ•°æ®åº“.html-4942da3c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.äº‹åŠ¡.html-45a814b0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/11.mysqlè½¯ä»¶ä½¿ç”¨.html-cab98929.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-e15d8ef6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/AHK.html-ca3eb289.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/Chrome.html-2b0db01c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/Intellij-Idea.html-c834d05b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/Listary.html-79de2118.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-8788d2f0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ffmpeg.html-6ad03563.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/notion.html-fe3be8fa.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/vscode.html-107e0e0f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-8b04f8a8.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.èµ·æ­¥.html-e4cb68ac.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.Babel ä¸ Loader.html-f33d5526.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.Css ä¸ Loader.html-6ab52c41.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.Asset Modules.html-9be2ccfa.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.resolve.html-cf2bd9c6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.module-federation.html-a56bcf64.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-182952ef.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®­å¤´å‡½æ•°.html-49e201fc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Proxy.html-8aee9f5f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.Reflect.html-bcdca116.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.è¿­ä»£å™¨.html-ad6fc4a5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.ç”Ÿæˆå™¨.html-25df2351.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.letä¸const.html-39b9ddec.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-45b11d54.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å…¥é—¨.html-24f034e3.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.åŒ¹é…å™¨.html-0e3a6b48.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.ç”Ÿå‘½å‘¨æœŸ.html-895da03b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.å¼‚æ­¥æµ‹è¯•.html-9eda0999.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-63c42635.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.ç®€ä»‹.html-810fbbd2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.æ³›å‹ã€å‡½æ•°ã€ç±»ä¸æ¥å£.html-386ac663.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-0a48e563.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.é—­åŒ…ä¸è§‚å¯Ÿè€…æ¨¡å¼.html-28f45e8e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-3ae20fa8.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.ç®€ä»‹.html-86027889.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.é˜²æŠ–èŠ‚æµ.html-10eb4910.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-11aa9605.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.fs.html-835ee951.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.å›è°ƒå‡½æ•°.html-1f71f0cc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.path.html-fa4878de.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.stream.html-cf7bbd61.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.signal.html-c60f86d4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.ä¸­é—´ä»¶.html-c0f02cc9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/15.æ‰§è¡Œå‘½ä»¤è¡Œ.html-acc80296.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-ec66f3f4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-d33ec561.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.å°†è§‚å¯Ÿè€…æ¨¡å¼ç”¨äºé¡µé¢æ¸²æŸ“.html-b83a6ac6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-48b28f7a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-12b7bbce.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/äº”åˆ†é’ŸåŸåˆ™.html-ba2dc991.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ä»€ä¹ˆæ ·çš„æ‚²å‰§ç”µå½±ä»¤äººåŠ¨å®¹.html-52977806.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ä»–äººå³åœ°ç‹±.html-a835433d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/å¿ƒæµ.html-654a7532.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/æŠ€æœ¯æ–‡ç« çš„ç»“æ„.html-03307bcd.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/ç¬¬äºŒä¸ªå™©æ¢¦.html-bbaa0107.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/è®¡åˆ’ä¸ºä½ å¸¦æ¥äº†ä»€ä¹ˆ.html-ab79b36c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-559cd2f7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Redux-Toolkit.html-17c94bf5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.åŸºæœ¬ä½¿ç”¨.html-828db36f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.immer.html-4204019f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.redux-thunk.html-648a746f.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.APIå¤‡å¿˜å½•.html-98625ce2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/15.æ ‡å‡†reduxæ¨¡å¼.html-141b328b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.rtk-queryåŸºæœ¬ä½¿ç”¨.html-9d658acc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-7db1174a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/00.ç®€ä»‹.html-f0ab4cb0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å…¥é—¨.html-e7a905e7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.useSWR.html-c8830b3c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.é¢„åŠ è½½.html-675291a2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.æ— é™åŠ è½½åˆ—è¡¨.html-e1a810f6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.é…ç½®å’Œæ¡ä»¶æ¸²æŸ“.html-fd3c724b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/08.ä¼ å…¥å‚æ•°.html-59858b42.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-38cd0583.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.æ‡’åŠ è½½.html-cd6e877c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.ä¼˜åŒ–ç›¸å…³.html-5d1b0536.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/110.ä¸€äº›å¸¸è§çš„å°é—®é¢˜.html-d2b722eb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/120.ä½ çœŸçš„å°†useEffectç”¨å¯¹åœ°æ–¹äº†å—.html-3a68fa4c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.Transition.html-90451658.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.useReducer.html-e8d829f2.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.HOC.html-efe8355b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.ref.html-48e739d0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.suspense.html-fcefc323.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.ErrorBoundary.html-444b2783.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.è‡ªå®šä¹‰hooks.html-0a923763.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/90.rule of hooks.html-2489036e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-37f30115.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å…¥é—¨.html-aeafaf10.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Selectorè¯¦è§£.html-bbfc3a87.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.æ•°æ®é¢„å–.html-2a8840fd.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.snapshotå¿«ç…§.html-399628b5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-4158d38e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŸºæœ¬ä½¿ç”¨.html-9c2a0b49.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.ssh.html-f0271eae.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/110.clash.html-b28f9aa5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.vim.html-6ba3a899.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/200.å¦‚ä½•ç”¨shellè„šæœ¬ç­¾å‡ºå›ºå®šçš„gitåˆ†æ”¯ï¼Ÿ.html-d1bdc22d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.å¸¸ç”¨é…ç½®.html-00441541.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.å¸¸ç”¨æ’ä»¶.html-e7e66045.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.bashè„šæœ¬.html-7d658152.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-812e5b81.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.åŸºæœ¬æ¦‚å¿µ.html-308a3fb7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.nginx-conf.html-6c3a3f41.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.å¸¸ç”¨å‘½ä»¤.html-fd3e7cd5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.æ–°æ‰‹å¸¸è§é—®é¢˜.html-ce30118e.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-2d38ef80.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.å¸¸ç”¨å‘½ä»¤.html-08edec34.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.ocrmypdf.html-c3517a60.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.mysql.html-0e7d2b9b.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-8bf932d7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.å¸¸ç”¨æŒ‡ä»¤.html-a698b0df.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.submodule.html-0d48ac62.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.gitHub-Cli.html-641adcbf.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-b1911ecc.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.Nuxt3åˆ›å»ºé¡¹ç›®.html-7bd733f5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-728c4131.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.history.html-be59b32a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-3174af5a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.å“åº”å¼API-refs.html-86f5c7d7.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/100.teleport.html-aabd3397.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.å“åº”å¼API-reactive.html-75df9086.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.å“åº”å¼API-computedå’Œwatch.html-31bee40a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.ç»„åˆå¼API-ç®€ä»‹.html-cf93f881.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.ç»„åˆå¼API-setup.html-8f72c254.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.ç»„åˆå¼API-setupè¯­æ³•ç³–.html-f6fed8e8.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.v-model.html-1ac83626.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.styleç‰¹æ€§.html-47882310.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-a4b81b14.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/10.data.html-cb322c83.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/20.å“åº”å¼åŸç†.html-6bded7fb.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/30.æ¸²æŸ“å‡½æ•°ä¸h.html-33cd8ff0.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/40.emit.html-d1234d4a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/50.attributeç»§æ‰¿.html-b16cf4cf.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/60.ref.html-473e02d4.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/70.computed.html-9695afaf.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/80.slot.html-d9b57256.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-836ae9e5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-3ad41da5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.Store.html-f6d2da93.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.getter.html-ad8449ac.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.subscribe.html-99906f05.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.æ’ä»¶.html-64166ac9.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-907923d1.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/01.ç®€ä»‹.html-029f9558.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/02.State.html-bf6d6bb6.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/03.getters.html-79bf704c.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/04.mutation.html-4bfd2701.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/05.actions.html-7946f993.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/06.modules.html-148014a5.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/07.ç»„åˆå¼API.html-c89c336d.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/08.æ’ä»¶.html-43e05e28.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/index.html-96669b8a.js" as="script"><link rel="prefetch" href="/vuepress-next-blog/assets/404.html-77871cec.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress-next-blog/" class=""><!----><span class="site-name">ğ“›ğ“²ğ“·ğ”‚ğ“¬çš„å°ç«™</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/vuepress-next-blog/#file-explorer" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/vuepress-next-blog/#file-explorer" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/vuepress-next-blog/java/10.%E8%B5%B7%E6%AD%A5.html" class="sidebar-item sidebar-heading" aria-label="èµ·æ­¥"><!--[--><!--]--> èµ·æ­¥ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/20.%E7%B1%BB.html" class="sidebar-item sidebar-heading" aria-label="ç±»"><!--[--><!--]--> ç±» <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/50.%E9%9A%8F%E6%9C%BA%E6%95%B0.html" class="sidebar-item sidebar-heading" aria-label="éšæœºæ•°"><!--[--><!--]--> éšæœºæ•° <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/60.%E6%9E%9A%E4%B8%BE%E7%B1%BB.html" class="sidebar-item sidebar-heading" aria-label="æšä¸¾ç±»"><!--[--><!--]--> æšä¸¾ç±» <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/70.%E8%AE%B0%E5%BD%95%E7%B1%BB.html" class="sidebar-item sidebar-heading" aria-label="è®°å½•ç±»"><!--[--><!--]--> è®°å½•ç±» <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/80.%E5%85%B6%E4%BB%96%E7%B1%BB%E7%9B%B8%E5%85%B3%E7%9A%84%E7%9F%A5%E8%AF%86.html" class="sidebar-item sidebar-heading" aria-label="å…¶ä»–ç±»ç›¸å…³çš„çŸ¥è¯†"><!--[--><!--]--> å…¶ä»–ç±»ç›¸å…³çš„çŸ¥è¯† <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/90.String.html" class="sidebar-item sidebar-heading" aria-label="String"><!--[--><!--]--> String <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/100.%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" class="sidebar-item sidebar-heading" aria-label="å¼‚å¸¸å¤„ç†"><!--[--><!--]--> å¼‚å¸¸å¤„ç† <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/110.classPath.html" class="sidebar-item sidebar-heading" aria-label="classPath"><!--[--><!--]--> classPath <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/120.package.html" class="sidebar-item sidebar-heading" aria-label="package"><!--[--><!--]--> package <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/130.jar%E5%92%8C%E6%A8%A1%E5%9D%97.html" class="sidebar-item sidebar-heading" aria-label="jarå’Œæ¨¡å—"><!--[--><!--]--> jarå’Œæ¨¡å— <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/140.%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84.html" class="sidebar-item sidebar-heading" aria-label="æ³¨è§£ä¸åå°„"><!--[--><!--]--> æ³¨è§£ä¸åå°„ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/150.%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80.html" class="sidebar-item sidebar-heading" aria-label="é¢å‘å¯¹è±¡åŸºç¡€"><!--[--><!--]--> é¢å‘å¯¹è±¡åŸºç¡€ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/160.%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" class="sidebar-item sidebar-heading" aria-label="å¤šçº¿ç¨‹"><!--[--><!--]--> å¤šçº¿ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/170.maven.html" class="sidebar-item sidebar-heading" aria-label="maven"><!--[--><!--]--> maven <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/180.%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" class="sidebar-item sidebar-heading" aria-label="å‡½æ•°å¼ç¼–ç¨‹"><!--[--><!--]--> å‡½æ•°å¼ç¼–ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/190.IO.html" class="sidebar-item sidebar-heading" aria-label="IO"><!--[--><!--]--> IO <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/200.JDBC.html" class="sidebar-item sidebar-heading" aria-label="JDBC"><!--[--><!--]--> JDBC <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/250.%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95.html" class="sidebar-item sidebar-heading" aria-label="å¸¸ç”¨æ–¹æ³•"><!--[--><!--]--> å¸¸ç”¨æ–¹æ³• <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/300.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="sidebar-item sidebar-heading" aria-label="è®¾è®¡æ¨¡å¼"><!--[--><!--]--> è®¾è®¡æ¨¡å¼ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/400.Spring.html" class="sidebar-item sidebar-heading" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/410.Spring-%E6%95%B0%E6%8D%AE%E5%BA%93.html" class="sidebar-item sidebar-heading" aria-label="Spring-æ•°æ®åº“"><!--[--><!--]--> Spring-æ•°æ®åº“ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/420.Spring-Hibernate.html" class="sidebar-item sidebar-heading" aria-label="Spring-Hibernate"><!--[--><!--]--> Spring-Hibernate <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/430.web%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80.html" class="sidebar-item sidebar-heading" aria-label="webå¼€å‘åŸºç¡€"><!--[--><!--]--> webå¼€å‘åŸºç¡€ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/440.Spring-Web%E5%BC%80%E5%8F%91.html" class="sidebar-item sidebar-heading" aria-label="Spring-Webå¼€å‘"><!--[--><!--]--> Spring-Webå¼€å‘ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/450.Spring-Boot.html" class="sidebar-item sidebar-heading" aria-label="Spring Boot"><!--[--><!--]--> Spring Boot <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/470.Spring-Data-JPA.html" class="sidebar-item sidebar-heading" aria-label="Spring-Data-JPA"><!--[--><!--]--> Spring-Data-JPA <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Spring-Security"><!--[--><!--]--> Spring-Security <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ˜¯ä»€ä¹ˆ"><!--[--><!--]--> æ˜¯ä»€ä¹ˆ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#ç™»å½•ç›¸å…³åŸºæœ¬æ¦‚å¿µ" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç™»å½•ç›¸å…³åŸºæœ¬æ¦‚å¿µ"><!--[--><!--]--> ç™»å½•ç›¸å…³åŸºæœ¬æ¦‚å¿µ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#cookie" class="router-link-active router-link-exact-active sidebar-item" aria-label="Cookie"><!--[--><!--]--> Cookie <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#session" class="router-link-active router-link-exact-active sidebar-item" aria-label="Session"><!--[--><!--]--> Session <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#token" class="router-link-active router-link-exact-active sidebar-item" aria-label="Token"><!--[--><!--]--> Token <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#jwt" class="router-link-active router-link-exact-active sidebar-item" aria-label="JWT"><!--[--><!--]--> JWT <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#refresh-token" class="router-link-active router-link-exact-active sidebar-item" aria-label="refresh_token"><!--[--><!--]--> refresh_token <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#å¯¹æ¯”æ€»ç»“" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¯¹æ¯”æ€»ç»“"><!--[--><!--]--> å¯¹æ¯”æ€»ç»“ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#å®ä¾‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="å®ä¾‹"><!--[--><!--]--> å®ä¾‹ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#å¼•å…¥ä¾èµ–åº“" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¼•å…¥ä¾èµ–åº“"><!--[--><!--]--> å¼•å…¥ä¾èµ–åº“ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#å¯åŠ¨é¡¹ç›®" class="router-link-active router-link-exact-active sidebar-item" aria-label="å¯åŠ¨é¡¹ç›®"><!--[--><!--]--> å¯åŠ¨é¡¹ç›® <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-next-blog/java/480.Spring-Security.html#æ·»åŠ -jwt" class="router-link-active router-link-exact-active sidebar-item" aria-label="æ·»åŠ  JWT"><!--[--><!--]--> æ·»åŠ  JWT <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/vuepress-next-blog/java/600.%E4%B8%80%E4%BA%9B%E5%90%8D%E8%AF%8D.html" class="sidebar-item sidebar-heading" aria-label="ä¸€äº›åè¯"><!--[--><!--]--> ä¸€äº›åè¯ <!--[--><!--]--></a><!----></li><li><a href="/vuepress-next-blog/java/" class="router-link-active sidebar-item sidebar-heading" aria-label="java"><!--[--><!--]--> java <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> æ˜¯ä»€ä¹ˆ</h2><p><em>Spring-Security</em> æ˜¯ä¸€ä¸ª Spring æä¾›çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼ˆ<em>Authentication</em>ï¼‰ã€æƒé™ç®¡ç†ã€æ‰¹å‡†è®¿é—®ï¼ˆ<em>Authorization</em>ï¼‰ã€å¯¹ç½‘ç»œæ”»å‡»çš„ä¿æŠ¤ç­‰åŠŸèƒ½çš„æ¡†æ¶ã€‚</p><p><em>Spring-Security</em> æ¦‚å¿µç¹æ‚ï¼Œå•ƒå®˜æ–¹æ–‡æ¡£å¯èƒ½ä¼šæœ‰äº›ä¸çŸ¥ä»ä½•å…¥æ‰‹çš„æ„Ÿè§‰ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯é€šè¿‡å®ä¾‹æ¥è®²è§£ã€‚å› æ­¤æ¥ä¸‹æ¥ä»¥** JWT æ¨¡å¼**ä¸¾ä¾‹ï¼Œå®ç°ä¸€ä¸ªæ³¨å†Œç™»å½•åŠŸèƒ½ã€‚</p><h2 id="ç™»å½•ç›¸å…³åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#ç™»å½•ç›¸å…³åŸºæœ¬æ¦‚å¿µ" aria-hidden="true">#</a> ç™»å½•ç›¸å…³åŸºæœ¬æ¦‚å¿µ</h2><h3 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h3><p>æœåŠ¡å™¨ç”Ÿæˆå¹¶è¿”å›ç»™å®¢æˆ·ç«¯çš„æ ¡éªŒä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ç”¨è¯¥ä¿¡æ¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œåˆ™æœåŠ¡ç«¯å¯ç¡®è®¤æ˜¯åŒä¸€ç”¨æˆ·ã€‚</p><p>æ‰€æœ‰ Cookie ä¿¡æ¯ç”±æœåŠ¡ç«¯ç”Ÿæˆï¼ˆè¿‡æœŸæ—¶é—´ã€åŸŸåç­‰ç­‰ï¼‰ï¼Œå®¢æˆ·ç«¯åªæ˜¯ä¿å­˜è¿™ä¸ª Cookie.</p><h3 id="session" tabindex="-1"><a class="header-anchor" href="#session" aria-hidden="true">#</a> Session</h3><p>æœåŠ¡ç«¯ç”Ÿæˆ Cookie å¹¶ä¸ä¼šå°†å…¶å­˜å‚¨ï¼Œè€Œæ˜¯å°†è¿™ä¸ªä»»åŠ¡äº¤ç»™å®¢æˆ·ç«¯ï¼Œä½†ç”¨æˆ·æ˜¯å¦ä¿®æ”¹äº†è¯¥ Cookieï¼ŒæœåŠ¡å™¨æ˜¯ä¸çŸ¥é“çš„ã€‚å› æ­¤ä¸ºäº†ä¿è¯å®‰å…¨æ€§ï¼ŒæœåŠ¡ç«¯éœ€è¦ç”Ÿæˆå¹¶å­˜å‚¨ä¸€ä»½ <em>Session</em> æ•°æ®ã€‚</p><p><em>Session</em> ç”Ÿæˆä¿¡æ¯ä¸­çš„ <em>SessionID</em> ä¼šè¢«æ”¾å…¥ Cookie ä¸­è¿”å›ç»™å‰ç«¯ã€‚å‰ç«¯å†æ¬¡å‘é€ Cookie æ—¶æœåŠ¡ç«¯å¯ä»¥ä»ä¸­æå–å‡º SessionID ï¼Œå¹¶æ‰¾åˆ°å¯¹åº”çš„ Session æ¥è¿›è¡Œæ ¡éªŒã€‚</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Session ä¸€èˆ¬åœ¨è¿è¡Œæ—¶ç›´æ¥å­˜å‚¨åœ¨å†…å­˜ä¸­</p></div><h3 id="token" tabindex="-1"><a class="header-anchor" href="#token" aria-hidden="true">#</a> Token</h3><p>å¦ä¸€ç§æ ¡éªŒç”¨æˆ·çš„æ–¹å¼ï¼Œå’Œ Cookie åŠŸèƒ½ç±»ä¼¼ï¼Œä½†éœ€è¦æŸ¥è¯¢æ•°æ®åº“å¯¹ uid ç­‰ä¿¡æ¯è¿›è¡Œæ ¡éªŒï¼Œä¸éœ€è¦è¿›è¡Œ Session é‚£æ ·çš„é¢å¤–å­˜å‚¨ã€‚Token ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p><ul><li><em>uid</em>ï¼ˆç”¨æˆ·å”¯ä¸€çš„èº«ä»½æ ‡è¯†ï¼‰</li><li><em>time</em>ï¼ˆå½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼‰</li><li><em>sign</em>ï¼ˆç­¾åï¼Œtoken çš„å‰å‡ ä½ä»¥å“ˆå¸Œç®—æ³•å‹ç¼©æˆçš„ä¸€å®šé•¿åº¦çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼‰.</li></ul><h3 id="jwt" tabindex="-1"><a class="header-anchor" href="#jwt" aria-hidden="true">#</a> JWT</h3><p>å…¨ç§° <em>JSON-Web-Token</em>. æœåŠ¡å™¨è®¤è¯åï¼Œç”Ÿæˆä¸€ä¸ªä½¿ç”¨ <em>HMAC</em> ç®—æ³•æˆ–è€…æ˜¯ <em>RSA çš„å…¬/ç§ç§˜é’¥å¯¹</em> ç­¾åè¿‡çš„ JSON å¯¹è±¡ï¼ˆåŒ…å« jwt ä¸­çš„ uidã€è¿‡æœŸæ—¶é—´è¿™äº›ä¿¡æ¯ï¼‰å¹¶äº¤ç»™å®¢æˆ·ç«¯å­˜å‚¨ã€‚ JWT çš„æ ¼å¼ä¸ºï¼š<code>Bearer åŠ å¯†ä¿¡æ¯</code> â€”â€”â€”â€” <strong>å› æ­¤å–æ•°æ®æ—¶éœ€è¦å»é™¤å‰é¢çš„ <code>Bearer</code></strong>.</p><h3 id="refresh-token" tabindex="-1"><a class="header-anchor" href="#refresh-token" aria-hidden="true">#</a> refresh_token</h3><p>JWT çš„ token è¿‡æœŸæ—¶é—´è¾ƒçŸ­ï¼Œè¿™å°±æ„å‘³ç€ç”¨æˆ·éœ€è¦ä¸åœçš„æ‰§è¡Œç™»å½•æ“ä½œã€‚ <em>refresh_token</em> çš„ä½œç”¨å°±æ˜¯è®©ç”¨æˆ·ä¿æŒç™»å½•ã€‚å®ƒçš„è¿è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ç”¨æˆ·é¦–æ¬¡è®¤è¯ï¼ŒæœåŠ¡ç«¯è¿”å› token å’Œ refresh_token</li><li>ç”¨æˆ·æ ¹æ® token è¯·æ±‚èµ„æºï¼Œä¸ä¼ é€’ refresh_tokenï¼Œç›´åˆ° token è¿‡æœŸã€‚</li><li>token è¿‡æœŸï¼ŒæœåŠ¡ç«¯è¯»å–å®¢æˆ·ç«¯ä¼ æ¥çš„ refresh_tokenï¼Œè‹¥å†…å«ä¿¡æ¯æ­£ç¡®ï¼Œåˆ™<strong>ä¸ç”¨é‡æ–°è¿›è¡Œç”¨æˆ·è®¤è¯</strong>ï¼Œç›´æ¥è¿”å›<strong>ç›¸åŒçš„ refresh_token å’Œæ–°çš„ token</strong>. è¿™ä¸ªè¿‡ç¨‹å°†æŒç»­åˆ° refresh_token è¿‡æœŸã€‚</li></ol><p><strong>ç–‘é—®1ï¼šrefresh_token æ˜¯å¦ä¼šç ´å token çš„å®‰å…¨æ€§ï¼Ÿ</strong> refresh_token <strong>åªæœ‰åˆæ¬¡ç™»å½•å’Œåˆ·æ–°tokenæ—¶æ‰åœ¨ç½‘ç»œä¸Šä¼ é€’</strong>ï¼Œä¸å®¹æ˜“è¢«ç›—å–ã€‚</p><p><strong>ç–‘é—®2ï¼šrefresh_token çš„å†…å«ä¿¡æ¯æœ‰å“ªäº›ï¼Ÿ</strong></p><ul><li>æ ‡è¯†ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·å</li><li>ä¸Šä¸€ä¸ªå‘æ”¾çš„ token ä¿¡æ¯ã€‚</li></ul><p><strong>JWT çš„æ ¡éªŒä¿¡æ¯æ˜¯è‡ªåŒ…å«çš„</strong>ï¼Œå› æ­¤æœåŠ¡ç«¯å¯ä»¥ç›´æ¥æŸ¥è¯¢å†…å­˜æ•°æ®ï¼Œä¹Ÿå¯ä»¥æŸ¥è¯¢æ•°æ®åº“æ ¡éªŒ JWT ä¸­çš„ä¿¡æ¯ã€‚</p><h3 id="å¯¹æ¯”æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”æ€»ç»“" aria-hidden="true">#</a> å¯¹æ¯”æ€»ç»“</h3><table><thead><tr><th style="text-align:center;">åç§°</th><th style="text-align:center;">æœåŠ¡ç«¯æ˜¯å¦å­˜å‚¨</th><th style="text-align:center;">æ˜¯å¦éœ€è¦æŸ¥è¯¢æ•°æ®åº“</th><th style="text-align:center;">ç¼ºç‚¹</th><th style="text-align:center;">è§£å†³æ–¹æ³•</th></tr></thead><tbody><tr><td style="text-align:center;">Cookie</td><td style="text-align:center;">false</td><td style="text-align:center;">false</td><td style="text-align:center;">æ— æ³•è·¨åŸŸï¼›å®¹æ˜“è¢«ç¯¡æ”¹</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">Session</td><td style="text-align:center;">true</td><td style="text-align:center;">false/true</td><td style="text-align:center;">å­˜å‚¨ Session å ç”¨æœåŠ¡å™¨å†…å­˜ï¼›åˆ†å¸ƒå¼ç³»ç»Ÿæ— æ³•è·å–å…¶ä»–æœåŠ¡å™¨å­˜å‚¨çš„ Session</td><td style="text-align:center;">å°† Session æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­</td></tr><tr><td style="text-align:center;">Token</td><td style="text-align:center;">false</td><td style="text-align:center;">true</td><td style="text-align:center;">æŸ¥è¯¢æ•°æ®åº“è€—æ—¶å¤ªé•¿</td><td style="text-align:center;">ä½¿ç”¨ redis è¿™ç§ NOSQL å¤„ç† Token çš„æ ¡éªŒé—®é¢˜</td></tr><tr><td style="text-align:center;">JWT</td><td style="text-align:center;">false</td><td style="text-align:center;">false/true</td><td style="text-align:center;">JWT ä¸€æ—¦ç­¾å‘ï¼Œåˆ°æœŸä¹‹å‰å§‹ç»ˆæœ‰æ•ˆ</td><td style="text-align:center;">ç”±å®¢æˆ·ç«¯æ¸…é™¤ Token</td></tr></tbody></table><h2 id="å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹" aria-hidden="true">#</a> å®ä¾‹</h2><h3 id="å¼•å…¥ä¾èµ–åº“" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥ä¾èµ–åº“" aria-hidden="true">#</a> å¼•å…¥ä¾èµ–åº“</h3><p><strong>Spring ä¸»æ¡†æ¶åº“ï¼š</strong></p><ul><li><code>spring-boot-starter-parent</code> : æŒ‡å®š <em>Spring-Boot</em> çš„ç‰ˆæœ¬</li><li><code>spring-boot-starter-security</code> : <em>Spring-Security</em> åº“</li><li><code>spring-boot-starter-web</code> : <em>Spring-Boot</em> web å¼€å‘åº“</li></ul><p><strong>æ•°æ®åº“ç›¸å…³ï¼š</strong></p><ul><li><code>spring-boot-starter-data-jpa</code> : æä¾› <em>ORM</em> æœåŠ¡ï¼Œå°†æ³¨å†Œçš„ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°æ•°æ®åº“ä¸­</li><li><code>jakarta.persistence-api</code> : æä¾›å®˜æ–¹çš„æ³¨è§£ï¼Œé…åˆ<code>spring-boot-starter-data-jpa</code></li><li><code>mysql-connector-java</code> : <em>mysql</em> é©±åŠ¨</li></ul><p><strong>JWT ç›¸å…³</strong></p><ul><li><code>jjwt-api</code> : JWT æ¥å£åŒ…</li><li><code>jjwt-impl</code> ï¼š JWT å®ç°åŒ…</li><li><code>jjwt-jackson</code> : å®ç° Java å¯¹è±¡å’Œ JSON å­—ç¬¦ä¸²çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li></ul><p><strong>å¼€å‘ç›¸å…³ï¼š</strong></p><ul><li><code>spring-boot-devtools</code> : ç”¨æˆ·ä¿®æ”¹ä»£ç æ—¶å¿«é€Ÿé‡å¯é¡¹ç›®ã€‚</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-jpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.11.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.11.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt-jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.11.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>jakarta.persistence<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jakarta.persistence-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¯åŠ¨é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨é¡¹ç›®" aria-hidden="true">#</a> å¯åŠ¨é¡¹ç›®</h3><p>å…¥å£ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SecurityApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æš´éœ²æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello , User !&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ·»åŠ -jwt" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ -jwt" aria-hidden="true">#</a> æ·»åŠ  JWT</h3><p>é¦–å…ˆ<strong>ç™»å½•å’Œæ³¨å†Œ</strong>çš„æ¥å£è‚¯å®šæ˜¯éœ€è¦çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ª <code>AuthenticationService</code> æœåŠ¡ç±»æ¥æä¾›è¯¦ç»†çš„é€»è¾‘ï¼Œè¿™é‡Œç›´æ¥è°ƒç”¨æœåŠ¡ç±»çš„ <code>register</code> å’Œ <code>authenticate</code> æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token comment">// æ³¨å†Œã€ç™»å½•ç›¸å…³æ¥å£</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/api/v1/auth&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AuthenticationService</span> authenticationService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/register&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">RegisterRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>authenticationService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">LoginRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>authenticationService<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆ <code>AuthenticationService</code> çš„æ³¨å†Œå’Œç™»å½•æ€æ ·ç¼–å†™å‘¢ï¼Ÿæˆ‘ä»¬æŒ‰ç…§æµç¨‹ï¼Œå…ˆæ¥çœ‹æ³¨å†ŒåŠŸèƒ½ï¼š</p><ol><li>ç”¨ä¸€ä¸ª <em>User Entity Bean</em> æ¥<strong>æ¥æ”¶å®¢æˆ·ç«¯æä¾›çš„ç”¨æˆ·åã€å¯†ç </strong></li><li>å°† User å¹¶<strong>å†™å…¥æ•°æ®åº“</strong>ï¼Œåœ¨å†™å…¥æ•°æ®åº“å‰ï¼Œéœ€è¦å°†å¯†ç <strong>åŠ å¯†</strong>ä¸€ä¸‹ã€‚</li><li>æŒ‰ç…§ User <strong>ç”Ÿæˆä¸€ä¸ª <em>jwt</em> ä½œä¸ºç”¨æˆ·å‡­è¯</strong>ï¼Œå®¢æˆ·ç«¯æºå¸¦ jwt è®¿é—®å…¶ä»–æ¥å£å°±ä¸ä¼šè¢«æ‹¦æˆªäº†ã€‚</li></ol><p>è¿™é‡Œç»™å‡ºé¡ºåºå›¾ï¼š <img src="https://linyc.oss-cn-beijing.aliyuncs.com/20230211150030.png" alt=""></p><p>æ—¢ç„¶è¦å’Œæ•°æ®åº“äº¤äº’ï¼Œé‚£æˆ‘ä»¬æŠŠ <em>ORM</em> çš„éƒ¨åˆ†å…ˆç¼–å†™ä¸€ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> <span class="token function">findByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Role</span> <span class="token punctuation">{</span>
    <span class="token constant">USER</span><span class="token punctuation">,</span>
    <span class="token constant">ADMIN</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">UserDetails</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Enumerated</span><span class="token punctuation">(</span><span class="token class-name">EnumType</span><span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Role</span> role<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Role</span> <span class="token function">getRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> role<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRole</span><span class="token punctuation">(</span><span class="token class-name">Role</span> role<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>role <span class="token operator">=</span> role<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">Role</span> role<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>role <span class="token operator">=</span> role<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleGrantedAuthority</span><span class="token punctuation">(</span>role<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æƒé™é›†åˆç”±æƒé™ç±»ç»„æˆï¼Œæœ€ç®€å•çš„æƒé™ç±»åªæœ‰ã€è·å–æƒé™åå­—ã€‘ã€ã€è·å–æƒé™ IDã€‘ã€ã€æƒé™æ˜¯å¦ç›¸ç­‰ã€‘çš„æ–¹æ³•</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAccountNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æµ‹è¯•ç”¨ï¼Œè´¦å·ä¸è¿‡æœŸ</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAccountNonLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//  æµ‹è¯•ç”¨ï¼Œè´¦å·æ— ç¦ç”¨åŠŸèƒ½</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isCredentialsNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æµ‹è¯•ç”¨ï¼Œæƒé™ä¸è¿‡æœŸ</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¯åŠ¨è´¦å·</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å—¯ï¼Ÿè¿™ä¸ª User å¥½åƒå¤šäº†ä¸å°‘æ–¹æ³•ï¼Ÿè¿™æ˜¯å› ä¸º <em>Spring-Security</em> ä¸ºäº†è¿›è¡Œæƒé™ç®¡ç†éœ€è¦æˆ‘ä»¬å®ç°å…¶æä¾›çš„ <code>UserDetails</code> æ¥å£ã€‚è¿™äº›æ–¹æ³•çš„ä¸»è¦åŠŸèƒ½æœ‰ä¸¤ä¸ªï¼š</p><ul><li>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¢«ç¦ç”¨ï¼Ÿè´¦å·æ˜¯å¦è¿‡æœŸï¼Ÿ...</li><li>ç”¨ <code>getAuthorities</code> è·å¾—ç”¨æˆ·çš„æƒé™é›†åˆï¼Œè¿™é‡Œç®€å•çš„ç”¨å­—ç¬¦ä¸² <code>&quot;User&quot;</code> è¡¨ç¤ºç”¨æˆ·æ‹¥æœ‰çš„æƒé™å³å¯ã€‚</li></ul><p>ç„¶åæˆ‘ä»¬å†ç¼–å†™ä¸€ä¸‹æ¥æ”¶ç”¨æˆ·å‚æ•°çš„ <em>Request Bean</em> å’Œ <em>Response Bean</em> ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationResponse</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">AuthenticationResponse</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>token <span class="token operator">=</span> token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>token <span class="token operator">=</span> token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegisterRequest</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥æ³¨å†Œæ–¹æ³•å°±ååˆ†ç®€å•æ˜äº†äº†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">PasswordEncoder</span> passwordEncoder<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JwtServiceImpl</span> jwtServiceImpl<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">AuthenticationResponse</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">RegisterRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>
                request<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                passwordEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// å­˜å…¥æ•°æ®åº“ä¹‹å‰å…ˆåŠ å¯†</span>
                <span class="token class-name">Role</span><span class="token punctuation">.</span><span class="token constant">USER</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> jwtToken <span class="token operator">=</span> jwtServiceImpl<span class="token punctuation">.</span><span class="token function">generateToken</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticationResponse</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿˜æœ‰ä¸¤ä¸ª Bean æˆ‘ä»¬è¿˜æ²¡æœ‰å®ç°ï¼š<code>PasswordEncoder</code> å’Œ <code>JwtServiceImpl</code> ã€‚å…¶ä¸­ <code>PasswordEncoder</code> æ¯”è¾ƒç®€å•ï¼Œ<em>Spirng-Security</em> æä¾›äº†ç›´æ¥çš„åŠ å¯†æ–¹æ³•ã€‚æˆ‘ä»¬æ‰¾ä¸ªé…ç½®ç±»å°†å…¶ä½œä¸ºä¸€ä¸ªè‡ªå®šä¹‰ Bean å®šä¹‰ä¸€ä¸‹ï¼Œ<em>Spring-boot</em> ä¼šå¸®æˆ‘ä»¬è‡ªå·±ç”Ÿæˆå¹¶æ³¨å…¥ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨ BCrypt åŠ å¯†æ–¹æ³•</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="jwtservice" tabindex="-1"><a class="header-anchor" href="#jwtservice" aria-hidden="true">#</a> JwtService</h4><p>è€Œ <code>JwtServiceImpl</code> æ˜¯æˆ‘ä»¬è¦é‡ç‚¹è®¨è®ºçš„ç¬¬ä¸€ä¸ªé‡å¤´æˆã€‚æˆ‘ä»¬éœ€è¦å®ƒå®ç°ä¸‰ä¸ªåŠŸèƒ½ï¼š</p><ul><li>ç”Ÿæˆ* jwt_token*.</li><li>ä» token å†…å«ä¿¡æ¯ä¸­è·å¾—ç”¨æˆ·è¯¦æƒ…ã€‚</li><li>åˆ¤æ–­ token æ˜¯å¦æœ‰æ•ˆã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">JwtService</span> <span class="token punctuation">{</span>
    <span class="token comment">// å°†ç”¨æˆ·è¯¦æƒ…ç”¨å¯†é’¥ç”Ÿæˆ token</span>
    <span class="token class-name">String</span> <span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token class-name">UserDetails</span> userDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UserDetails</span> <span class="token function">getUserDetailFromToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ ¡éªŒ token</span>
    <span class="token class-name">Boolean</span> <span class="token function">validateToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬è¿˜æ˜¯ä¸€ä¸ªä¸ªæ¥çœ‹ï¼Œå…ˆçœ‹ç”Ÿæˆ* jwt_token*. æœ‰äº†åº“ <code>jjwt-impl</code> çš„å¸®åŠ©ï¼Œå®ƒä»æˆ‘ä»¬ç¼–ç¨‹è§’åº¦ä¸Šçœ‹åªæœ‰ä¸¤æ­¥ï¼ˆè™½ç„¶åœ¨åŠ å¯†ä¹‹å‰ <code>jjwt-impl</code> è¿˜ä¼šæ·»åŠ ä¸€äº›å¿…è¦çš„ä¿¡æ¯ï¼‰ï¼š</p><ol><li>æä¾›è¦æ³¨å…¥ token ä¸­çš„ä¿¡æ¯</li><li>å°†ä¿¡æ¯åŠ å¯†æˆå­—ç¬¦ä¸²å½¢å¼ã€‚</li></ol><p>ä½†æ³¨å…¥çš„ä¿¡æ¯æ˜¯ JSON æ ¼å¼çš„ï¼Œå®é™…ä¸Šè¿˜éœ€è¦å°† Java å¯¹è±¡è½¬åŒ–ä¸º JSON å­—ç¬¦ä¸²ã€‚<code>jjwt-impl</code> å¯ä»¥å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªè½¬æ¢ï¼Œå‰ææ˜¯æˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ªå“ˆå¸Œè¡¨ <code>Map Claims</code> â€”â€”â€”â€” è€Œå…¶ä¸­çš„ä¸€ä¸ªé”®å€¼å¯¹ç§°ä¸ºä¸€ä¸ª Claimï¼Œ<strong>è®°ä½è¿™ä¸ª Claimsï¼Œå¯¹ç†è§£å¦‚ä½•ä» token ä¸­å–å€¼å¾ˆé‡è¦</strong>ã€‚ Claims å†…çš„ Claim å¤§æ¦‚ä¸ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>exp = è¿‡æœŸæ—¶é—´
sub = ä½ è¦å­˜å‚¨çš„ä¿¡æ¯
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>jjwt-impl</code> æä¾›äº†å®ç°äº†å»ºç­‘è€…æ¨¡å¼çš„æ¥å£ <code>Jwts.builder()</code> ï¼Œæ–¹ä¾¿æˆ‘ä»¬é“¾å¼æ·»åŠ ä¿¡æ¯ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼š</p><ol><li>æ·»åŠ  Claims</li><li>æ·»åŠ å…¶ä»–ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¼š<strong>è‡ªåŠ¨åŠ å…¥ Claims ä¸­</strong>ã€‚</li></ol><p>è¿™æ ·åœ¨æ‰“åŒ…æ—¶ <code>jjwt-impl</code> å°±å¯ä»¥è¯»å– claim å¹¶å°†å…¶è½¬åŒ–ä¸º json å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token class-name">UserDetails</span> userDetails<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å»ºç­‘è€…æ¨¡å¼</span>
                <span class="token punctuation">.</span><span class="token function">setClaims</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span>  <span class="token comment">// è®¾ç½® claimsï¼Œåç»­çš„å…¶ä»– set ä¿¡æ¯å‡ä¼šè¢«å¹¶è‡ªåŠ¨æ”¾å…¥ claim å“ˆå¸Œè¡¨ï¼Œä»¥ä¾¿æŸ¥è¯¢</span>
                <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>userDetails<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å°†ç”¨æˆ·åä½œä¸ºå†…å«ä¿¡æ¯ä¼ å…¥</span>
                <span class="token punctuation">.</span><span class="token function">setIssuedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®æ´¾å‘æ—¶é—´</span>
                <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token constant">JWT_TOKEN_VALIDITY</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token function">getSignInKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS512</span><span class="token punctuation">)</span> <span class="token comment">// ç”¨ HS512 + å¯†é’¥ç­¾å</span>
                <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°† claims è½¬åŒ–ä¸º JSON å¯¹è±¡å¹¶åŠ å¯†æˆå­—ç¬¦ä¸²</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„å¯†é’¥ç”Ÿæˆæ–¹æ³• <code>getSignInKey</code> ä¹Ÿæ¯”è¾ƒå¥½ç®€å•ï¼Œå®ƒåªéœ€è¦ä¸€ä¸ªå¼€å‘è€…æä¾›çš„å­—ç¬¦ä¸²ä½œä¸ºç§å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token comment">// ç”Ÿæˆå¯†é’¥çš„ KEY å€¼ï¼Œç§å­å˜é‡ï¼Œéšä¾¿å–</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SECRET_KEY</span> <span class="token operator">=</span> <span class="token string">&quot;404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// ç”Ÿæˆå¯†é’¥</span>
    <span class="token keyword">private</span> <span class="token class-name">Key</span> <span class="token function">getSignInKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç”¨ BASE64 è§£ç ä¸ºäºŒè¿›åˆ¶ç¼–ç </span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keyBytes <span class="token operator">=</span> <span class="token class-name">Decoders</span><span class="token punctuation">.</span><span class="token constant">BASE64</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token constant">SECRET_KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        ä½¿ç”¨ HMAC ç®—æ³•ç”Ÿæˆå¯†é’¥</span>
        <span class="token keyword">return</span> <span class="token class-name">Keys</span><span class="token punctuation">.</span><span class="token function">hmacShaKeyFor</span><span class="token punctuation">(</span>keyBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€æ—¦ç†è§£äº† Claims çš„æ¦‚å¿µï¼Œå‰©ä¸‹ä¸¤ä¸ªåŠŸèƒ½å°±æ¯”è¾ƒå¥½ç†è§£äº†ã€‚</p><ul><li>ä» token ä¸­è·å¾—ç”¨æˆ·å ï¼š ä» token ä¸­è¯»å‡º Claimsï¼Œæˆ‘ä»¬åˆšæ‰å°†ç”¨æˆ·åç”¨ <code>setSubject</code> è¿›è¡Œå­˜å‚¨ï¼Œé‚£ä¹ˆåŒæ ·ç”¨ <code>getSubject</code> ä»ä¸­å–å‡ºå°±å¥½äº†</li><li>åˆ¤æ–­ token æ˜¯å¦æœ‰æ•ˆ ï¼š åŒæ ·çš„ï¼Œä» Claims ä¸­è¯»å‡ºè¿‡æœŸæ—¶é—´ï¼Œå’Œç°åœ¨æ—¶é—´å¯¹æ¯”å°±å¯ä»¥äº†ã€‚</li></ul><p>å› ä¸ºæˆ‘ä»¬è¦å–å¾—æ•°æ®å¯èƒ½æ˜¯ä¸åŒçš„æ ¼å¼ï¼Œå› æ­¤æˆ‘ä»¬è€ƒè™‘ç”¨ä¸€ä¸ªæ³›å‹æ¥æ¥æ”¶å–å‡ºçš„æ•°æ®ï¼Œè¿™éƒ¨åˆ†ç›´æ¥çœ‹ä»£ç æ›´å¥½ç†è§£ä¸€äº›ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token comment">// ä» claim ä¸­è·å–æŒ‡å®šæ•°æ®</span>
    <span class="token keyword">private</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getClaimFromToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> claimsResolver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä» token ä¸­è·å¾—æ‰€æœ‰ Claim</span>
        <span class="token keyword">final</span> <span class="token class-name">Claims</span> claims <span class="token operator">=</span> <span class="token function">getAllClaimsFromToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//         åˆ©ç”¨ claimResolver è§£æ claimï¼Œ</span>
        <span class="token keyword">return</span> claimsResolver<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ä» token ä¸­è·å– claims</span>
    <span class="token keyword">private</span> <span class="token class-name">Claims</span> <span class="token function">getAllClaimsFromToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Jwts</span>
                <span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span><span class="token function">getSignInKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// token çš„å¯†é’¥æ˜¯ä»€ä¹ˆ</span>
                <span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token comment">// ç”¨å¯†é’¥è§£æ token</span>
                <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–ç»“æœ</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getUsernameFromToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getClaimFromToken</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token class-name">Claims</span><span class="token operator">::</span><span class="token function">getSubject</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„æ³›å‹ + å‡½æ•°å¯èƒ½ä¼šçœ‹èµ·æ¥æœ‰ç‚¹ç»•ï¼Œç”¨è¯­è¨€æ¥è¡¨è¿°å¾ˆç®€å•ï¼šè°ƒç”¨<code>getClaimFromToken</code> æ—¶æä¾›ä¸€ä¸ªåœ¨ <code>Claims</code> ä¸­è·å–ç›®æ ‡æ•°æ®çš„æ–¹æ³•ï¼Œå¦‚<code>getSubject</code> ï¼Œ<code>getClaimFromToken</code> å‡½æ•°å¸®æˆ‘ä»¬è°ƒç”¨ <code>Claims.getSubject()</code> å°†æ•°æ®ä» claims ä¸­å–å‡ºã€‚</p><p>è¿™é‡Œçš„ <code>Function&lt;A,B&gt; function</code> è¡¨ç¤º <code>function</code> <strong>æ¥æ”¶ A ç±»å‹çš„å‚æ•°ï¼Œè¿”å› B ç±»å‹çš„å‚æ•°</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> i<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span> <span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> function<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰äº function(i)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">testFunction</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>i<span class="token operator">-&gt;</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†ä½ å¯èƒ½è¿˜æ˜¯è§‰å¾—å¥‡æ€ªï¼š<code>claimsResolver.apply(claims)</code> çš„æ„æ€ä¸æ˜¯ <code>claimsResolver(claims)</code>ï¼Œåˆæˆ–è€…è¯´æ˜¯ <code>getSubject(claims)</code> å—ï¼Ÿè¿™ä¸ªå’Œæˆ‘ä»¬åˆšæ‰è¯´çš„ <code>Claims.getSubject()</code> æ ¹æœ¬å°±ä¸ä¸€æ ·å•Šï¼</p><p>å¦‚æœä½ å­¦è¿‡ python ä¼šæ¯”è¾ƒå¥½ç†è§£ï¼Œç±»å®ä¾‹çš„å‡½æ•°ä¼šå°†ç±»å®ä¾‹ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼Œè€Œè¿™åœ¨ Java ä¸­æ˜¯éšå¼ä¼ å…¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶æˆ‘ä»¬çœ‹åˆ°çš„ <code>Claims.getSubject()</code> å®šä¹‰æ˜¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;sub&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†ä»–å®é™…ä¸Šæ˜¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;sub&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ <code>getSubject.apply(claims)</code> ç­‰äºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSubject</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> claims<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;sub&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº†ç”¨æˆ·åï¼Œæ€ä¹ˆè·å–ç”¨æˆ·è¯¦æƒ…å‘¢ï¼Ÿå¯ä»¥ä»æ•°æ®åº“ä¸­æŸ¥æ‰¾ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨æˆ·æœåŠ¡ <code>UserService</code> æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token keyword">implements</span> <span class="token class-name">UserDetailsService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userRepository<span class="token punctuation">.</span><span class="token function">findByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>UserDetailsService</code> æ˜¯ <em>Spring-Security</em> æä¾›çš„ä¸€ä¸ªæ¥å£ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³• <code>loadUserByUsername</code> ï¼Œå³é€šè¿‡ç”¨æˆ·åè·å–ç”¨æˆ·è¯¦æƒ…çš„æ–¹æ³•â€”â€”â€”â€”è¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">JwtService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getUsernameFromToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getClaimFromToken</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token class-name">Claims</span><span class="token operator">::</span><span class="token function">getSubject</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">getUserDetailFromToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token function">getClaimFromToken</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token class-name">Claims</span><span class="token operator">::</span><span class="token function">getSubject</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">loadUserByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦æ ¡éªŒ token æ˜¯å¦æœ‰æ•ˆï¼Œåˆ—ä¸¾æ¯ä¸€ç§ token æ— æ•ˆçš„æƒ…æ™¯ï¼š</p><ul><li>token ä¸ºç©º</li><li>token è¿‡æœŸ</li><li>token å†…å«æ•°æ®è§£æå¤±è´¥</li><li>token å†…å«æ•°æ®å’Œæ•°æ®åº“ä¿¡æ¯ä¸åŒ¹é…</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
    <span class="token comment">//    æ ¡éªŒ Token</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">validateToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>token <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;jwt ä¸ºç©º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTokenExpired</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;jwt è¿‡æœŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">MalformedJwtException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;jwt æ ¼å¼é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å› ä¸ºæœ¬ä¾‹ä¸­æ²¡æœ‰è´¦å·ç¦ç”¨ç­‰åŠŸèƒ½ï¼Œåœ¨æ•°æ®åº“ä¸­èƒ½æ‰¾åˆ° username çš„æ•°æ®å°±è¯´æ˜ token æœ‰æ•ˆ</span>
            <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token function">getUsernameFromToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
            userService<span class="token punctuation">.</span><span class="token function">loadUserByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ²¡èƒ½ä» token ä¸­è§£æå‡º username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UsernameNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ•°æ®åº“ä¸­æ²¡æ‰¾åˆ° username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬ç»ˆäºå°† <code>JwtService</code> ç¼–å†™å®Œæ¯•äº†ã€‚</p><h4 id="filter" tabindex="-1"><a class="header-anchor" href="#filter" aria-hidden="true">#</a> Filter</h4><p>å¥½äº†ï¼Œæˆ‘ä»¬æˆåŠŸç”Ÿæˆäº† token è¿”å›ç»™ç”¨æˆ·ï¼Œæ¥ä¸‹æ¥è¦åšä»€ä¹ˆï¼Ÿæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ª<strong>è¿‡æ»¤å™¨ Filter</strong>ï¼Œæ‹¦æˆªæ‰€æœ‰æ²¡æœ‰ token çš„è¯·æ±‚ã€‚</p><p>å™¢ä¸å¯¹ï¼Œæ³¨å†Œå’Œç™»å½•çš„åœ°æ–¹åˆéœ€è¦æ²¡æœ‰ token ä¹Ÿèƒ½å¤Ÿè®¿é—®ï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸ªåœ°æ–¹å®šä¹‰ä¸€ä¸‹è¿™å—é…ç½®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JwtRequestFilter</span> jwtRequestFilter<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">securityFilterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        http
                <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// æœ¬ä¾‹å­ä¸­ä¸å¤„ç† csrf æ”»å‡»</span>
                <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span>authorize <span class="token operator">-&gt;</span> authorize <span class="token comment">// é…ç½®è·¯ç”±å’Œæƒé™çš„å…³ç³»</span>
                        <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token string">&quot;/api/v1/auth/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// **è¡¨ç¤ºåŒ¹é…æ‰€æœ‰å­è·¯ç”±ï¼Œ/api/v1/auth/** ä¸‹çš„è·¯ç”±å‡å…è®¸ç›´æ¥è¿‡ Filter</span>
                        <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å…¶ä»–æ‰€æœ‰è·¯ç”±éƒ½éœ€è¦ç™»å½•åæ‰èƒ½è®¿é—®ï¼Œè¿™é‡Œçš„ authenticated() è¡¨ç¤ºå·²ç»è¿›è¡Œè¿‡äº†èº«ä»½éªŒè¯ Authentication</span>
                <span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">sessionManagement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sessionCreationPolicy</span><span class="token punctuation">(</span><span class="token class-name">SessionCreationPolicy</span><span class="token punctuation">.</span><span class="token constant">STATELESS</span><span class="token punctuation">)</span> <span class="token comment">// å°† session ç­–ç•¥è®¾ä¸ºæ— çŠ¶æ€ç­–ç•¥ï¼Œä¸ä¼šä¿å­˜ Session çŠ¶æ€</span>
                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ç”¨ä¸€ä¸ª and æ–¹æ³•è¿”å› HttpSecurity å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥ç»§ç»­é“¾å¼è°ƒç”¨äº†</span>
                <span class="token punctuation">.</span><span class="token function">addFilterBefore</span><span class="token punctuation">(</span>jwtRequestFilter<span class="token punctuation">,</span> <span class="token class-name">UsernamePasswordAuthenticationFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¡¨ç¤ºåœ¨é»˜è®¤çš„ã€ç”¨æˆ·åå¯†ç èº«ä»½è®¤è¯è¿‡æ»¤å™¨ã€‘ä¹‹å‰æ’å…¥ Jwt è¿‡æ»¤å™¨</span>
        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ä¾‹å­é…ç½®äº† http è¯·æ±‚çš„å¤„ç†æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¸é˜²å¾¡ csrf æ”»å‡»ï¼Œä¸ä½¿ç”¨ Session-cookies æ¨¡å¼ï¼Œå› æ­¤éœ€è¦å¤šåŠ ä¸¤ä¸ªé“¾å¼è°ƒç”¨ã€‚</p><p>æ¬¸ï¼Œè¿™ä¸ªæ–¹æ³•çš„åå­—å« <code>securityFilterChain</code> ï¼Œ<code>Chain</code> è¡¨ç¤ºé”é“¾ï¼Œè€Œæˆ‘ä»¬æ·»åŠ è¿‡æ»¤å™¨ä¹Ÿä¸æ˜¯ç›´æ¥ç»‘å®šï¼Œè€Œæ˜¯ä½¿ç”¨æ’å…¥æ–¹æ³• <code>addFilterBefore</code> ã€‚è¿™æ˜¯å› ä¸º <em>Spring-Security</em> ä¼šé€šè¿‡ä¸€æ¡è¿‡æ»¤é“¾ï¼Œ<strong>åœ¨å‰é¢çš„è¿‡æ»¤å™¨ä¸­ä¸ç›´æ¥æ‹¦æˆªï¼Œåªæ˜¯å¾€å½“å‰è¯·ç”¨ç”¨æˆ·çš„ä¸Šä¸‹æ–‡ä¸­æ·»åŠ è®¤è¯ä¿¡æ¯ï¼Œè€Œåœ¨æœ€åä¸€ä¸ªè¿‡æ»¤å™¨ä¸­æ‰è¿›è¡Œæ‹¦æˆª</strong>ï¼š</p><p><img src="https://linyc.oss-cn-beijing.aliyuncs.com/sequence_filterChain.png" alt=""></p><p>å¥½äº†ï¼Œæ¥ä¸‹æ¥çš„å·¥ä½œå°±æ˜¯å®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ <code>jwtRequestFilter</code> ï¼Œä»åˆšæ‰çš„å·¥ä½œæ¥çœ‹ï¼Œæˆ‘ä»¬ä¼¼ä¹åªè¦è§£æä¸€ä¸‹ tokenï¼Œtoken æ­£ç¡®å°±æŠŠç”¨æˆ·è®¤è¯æ·»åŠ è¿›ä¸Šä¸‹æ–‡ä¸­ï¼Œå…¶ä»–çš„æƒ…å†µä¸€å¾‹ä¸æ·»åŠ å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtRequestFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JwtServiceImpl</span> jwtServiceImpl<span class="token punctuation">;</span>

    <span class="token comment">// å¤„ç†è¯·æ±‚é¦–éƒ¨</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">removeBearer</span><span class="token punctuation">(</span><span class="token class-name">String</span> requestTokenHeader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>requestTokenHeader <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;requestTokenHeader null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>requestTokenHeader<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> requestTokenHeader<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;requestTokenHeader have not Bearer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
                                    <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> requestTokenHeader <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// JWT æ”¾åœ¨é¦–éƒ¨çš„ Authorization å­—æ®µä¸­</span>

        <span class="token class-name">String</span> jwtToken <span class="token operator">=</span> <span class="token function">removeBearer</span><span class="token punctuation">(</span>requestTokenHeader<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Jwt æ ¼å¼ä¸º &quot;Bearer åŠ å¯†ä¿¡æ¯&quot; ï¼Œè·å–ä¿¡æ¯æ—¶éœ€è¦å°†å‰é¢çš„ Bearer å»é™¤</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>jwtServiceImpl<span class="token punctuation">.</span><span class="token function">validateToken</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¦‚æœ token æœ‰æ•ˆ</span>
            <span class="token function">setAuthentication</span><span class="token punctuation">(</span>jwtServiceImpl<span class="token punctuation">.</span><span class="token function">getUserDetailFromToken</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†åŒ¹é…åˆ°çš„ç”¨æˆ·è¯¦æƒ…å’Œè¯·æ±‚è®¾ç½®åˆ°ä¸Šä¸‹æ–‡ä¸­ </span>
        <span class="token punctuation">}</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸è®º token è§£æçš„ç»“æœå¦‚ä½•ï¼Œéƒ½é€šè¿‡è¿™ä¸ªè¿‡æ»¤å™¨ï¼Œè®©æœ€åä¸€ä¸ªè¿‡æ»¤å™¨é€‰æ‹©æ‹¦æˆªæˆ–é€šè¿‡è¯·æ±‚</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æ·»åŠ è¿›ä¸Šä¸‹æ–‡çš„æœ‰â€œåŒ¹é…åˆ°çš„ç”¨æˆ·è¯¦æƒ…â€å’Œâ€œå½“å‰è¯·æ±‚ requestâ€ ä¸¤ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬å°†è¿™äº›ä¿¡æ¯æä¾›ç»™ <code>setAuthentication</code> æ–¹æ³•ï¼Œåœ¨é‡Œé¢ç¼–å†™å…·ä½“çš„æ·»åŠ æ“ä½œï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setAuthentication</span><span class="token punctuation">(</span><span class="token class-name">UserDetails</span> userDetails<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">UsernamePasswordAuthenticationToken</span> usernamePasswordAuthenticationToken <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>
                userDetails<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// èº«ä»½ä¸»ä½“ï¼Œé€šå¸¸æ˜¯ç”¨æˆ·åæˆ–æ‰‹æœºå·</span>
                userDetails<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// èº«ä»½å‡­è¯ï¼Œé€šå¸¸æ˜¯å¯†ç æˆ–æ‰‹æœºéªŒè¯ç </span>
                userDetails<span class="token punctuation">.</span><span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æˆæƒä¿¡æ¯ï¼Œé€šå¸¸æ˜¯è§’è‰² Role</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æŠŠæœ¬æ¬¡è¯·æ±‚çš„ HttpServletRequest ä¹Ÿå­˜è¿›å»ã€‚</span>
        usernamePasswordAuthenticationToken<span class="token punctuation">.</span><span class="token function">setDetails</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebAuthenticationDetailsSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildDetails</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å°† token æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ä¸­</span>
        <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAuthentication</span><span class="token punctuation">(</span>usernamePasswordAuthenticationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„ <code>usernamePasswordAuthenticationToken</code> å¯èƒ½ä¼šè®©äººæœ‰ç‚¹ç–‘æƒ‘ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€ç›´å°† <code>jwt_token</code> ç®€ç§°ä¸º <code>token</code> ï¼Œè€Œè¿™é‡Œè¿™ä¸ªé•¿é•¿çš„ token åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><code>token</code> çš„æ„æ€æ˜¯â€œè±¡å¾æ€§çš„ä¸œè¥¿ã€ä»¤ç‰Œâ€ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡æ¥è±¡å¾ç”¨æˆ·ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯ <code>usernamePasswordAuthenticationToken</code> ï¼Œæˆ‘ä»¬å°† <code>usernamePasswordAuthenticationToken</code> æ·»åŠ è¿›ä¸Šä¸‹æ–‡ä¸­ï¼Œå°±æ˜¯å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯ï¼ˆæˆæƒï¼‰ã€‚</p><p>ä½ å¯èƒ½è¿˜æœ‰ä¸€ä¸ªç–‘æƒ‘çš„åœ°æ–¹ï¼Œè¿™é‡Œçš„ä¸Šä¸‹æ–‡ <code>SecurityContextHolder.getContext()</code> ä¸åº”è¯¥è¡¨ç¤ºçš„æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ç©ºé—´å—ï¼Ÿé‚£æˆ‘ä»¬å­˜å‚¨ç”¨æˆ·è®¤è¯ä¿¡æ¯ä¸åº”è¯¥å°†å…¶å­˜æ”¾åˆ°ä¸€ä¸ªç±»ä¼¼äºåˆ—è¡¨çš„åœ°æ–¹å—ï¼Ÿ<code>setAuthentication</code> ä¹Ÿä¸åƒæ˜¯æ’å…¥åˆ—è¡¨çš„æ–¹æ³•å‘€ï¼Ÿ</p><p>äº‹å®ä¸Šï¼Œä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯å½“å‰ç”¨æˆ·ã€å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ã€‚Spring ç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œè¿™é‡Œçš„ä¸Šä¸‹æ–‡æ˜¯ä¿å­˜åœ¨ <code>ThreadLocal</code> ä¸­çš„ï¼Œ<strong>ç”¨æˆ·ä¹‹é—´çš„ä¸Šä¸‹æ–‡æ˜¯éš”ç¦»çš„</strong>ã€‚</p><p>è¿˜æœ‰ä¸€ä»¶äº‹æˆ‘æƒ³è¦æä¸€ä¸‹ï¼Œæˆ‘ä»¬çŸ¥é“æœ€åä¸€ä¸ªè¿‡æ»¤å™¨ <code>FilterSecurityInterceptor</code> ä¼šæ‹¦æˆªä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰æƒé™çš„è¯·æ±‚ï¼Œå®ƒå…·ä½“æ˜¯æ€æ ·æ‹¦æˆªçš„å‘¢ï¼Ÿ è¿™ä¸ªæˆæƒä¿¡æ¯æ˜¯åœ¨ç”Ÿæˆ <code>UsernamePasswordAuthenticationToken</code> æ—¶å€™æ·»åŠ çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span><span class="token class-name">Object</span> principal<span class="token punctuation">,</span> <span class="token class-name">Object</span> credentials<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">(</span>authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> principal<span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>credentials <span class="token operator">=</span> credentials<span class="token punctuation">;</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å·²æˆæƒ</span>
   <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>FilterSecurityInterceptor</code> åªè¦é€šè¿‡ <code>SecurityContextHolder.getContext().getAuthentication()</code> æ–¹æ³•å°±å¯ä»¥æŸ¥æ‰¾å½“å‰ç”¨æˆ·çš„æˆæƒæƒ…å†µäº†ã€‚</p><h4 id="login" tabindex="-1"><a class="header-anchor" href="#login" aria-hidden="true">#</a> Login</h4><p>æˆ‘ä»¬ä¹‹å‰åœ¨ç”¨æˆ·æ³¨å†Œæ—¶ç”Ÿæˆäº†ä¸€ä¸ª token ç»™ç”¨æˆ·ï¼Œä½† token ä¼šè¿‡æœŸï¼Œæˆ‘ä»¬è¿˜è¦å®ç°ç™»å½•çš„åŠŸèƒ½ï¼Œæ¥å›å¿†ä¸€ä¸‹ç™»å½•æ¥å£çš„ç¼–å†™ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// æ³¨å†Œã€ç™»å½•ç›¸å…³æ¥å£</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/api/v1/auth&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AuthenticationService</span> authenticationService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">LoginRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>authenticationService<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ç°åœ¨è¦å›åˆ° <code>authenticationService</code> æ¥ç¼–å†™ç™»å½•åŠŸèƒ½ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹æ€æ ·å®ç°ï¼š</p><ol><li>æ”¶åˆ°å‰ç«¯ä¼ é€’çš„ç”¨æˆ·åå’Œå¯†ç </li><li>æ ¹æ®ç”¨æˆ·ååˆ°æ•°æ®åº“è¯»å‡ºåŠ å¯†åçš„å¯†ç </li><li>å¯¹å¯†ç è¿›è¡Œè§£å¯†ï¼Œå¹¶å’Œç”¨æˆ·è¾“å…¥çš„å¯†ç è¿›è¡Œæ¯”è¾ƒ</li><li>è‹¥åŒ¹é…ï¼Œç”Ÿæˆ token å¹¶è¿”å›</li></ol><p>é€»è¾‘ä¸å¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®ç°ï¼Œä½† <em>Spring-Security</em> å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†é€šç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å°‘é‡ä»£ç å°±å¯ä»¥å®ç°ä¸Šé¢è¿™äº›é€»è¾‘ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JwtServiceImpl</span> jwtServiceImpl<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">AuthenticationResponse</span> <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token class-name">LoginRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Authentication</span> authentication <span class="token operator">=</span> authenticationManager<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span> <span class="token comment">// ç”¨ authenticationManager æˆæƒç®¡ç†å™¨ æ£€æŸ¥ç”¨æˆ·çš„è´¦å·å¯†ç æ˜¯å¦åŒ¹é…ï¼Œè‹¥ä¸åŒ¹é…ï¼ŒæŠ›å‡ºé”™è¯¯</span>
                <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>
                        request<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        request<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> authentication<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–å‡ºç”¨æˆ·è¯¦æƒ…</span>
        <span class="token comment">// ç”Ÿæˆ token</span>
        <span class="token class-name">String</span> jwtToken <span class="token operator">=</span> jwtServiceImpl<span class="token punctuation">.</span><span class="token function">generateToken</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¿”å› token</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticationResponse</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„ <code>authenticationManager</code> æ˜¯ä¸€ä¸ªæˆæƒç®¡ç†å™¨ï¼Œé€šè¿‡å…¶ <code>authenticate()</code> æ–¹æ³•ï¼Œä»–ä¼šæ‰¾åˆ°ä¸€ç»„å«åš <code>AuthenticationProvider</code> çš„æƒé™æä¾›è€…ï¼Œç”±ä»–ä»¬æ¥è¿›è¡Œ &quot;æ£€æŸ¥ç”¨æˆ·çš„è´¦å·å¯†ç æ˜¯å¦åŒ¹é…ï¼Œè‹¥ä¸åŒ¹é…ï¼ŒæŠ›å‡ºé”™è¯¯&quot; çš„å®ç°ã€‚è€Œ <code>DaoAuthenticationProvider</code> åˆ™æ˜¯ä¸€ä¸ªæœ€å¸¸ä½¿ç”¨çš„ç”¨äºæ ¡éªŒç”¨æˆ·åå¯†ç çš„æƒé™æä¾›è€…ã€‚å®ƒå¯ä»¥è‡ªåŠ¨è¿›è¡Œâ€œæŸ¥æ‰¾æ•°æ®åº“ï¼Œè§£å¯†å¯†ç ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…â€ç­‰åŠŸèƒ½ã€‚</p><p>å› æ­¤æˆ‘ä»¬è¿˜éœ€è¦è‡ªå®šä¹‰ä¸¤ä¸ª Bean ï¼š <code>authenticationManager</code> å’Œ <code>AuthenticationProvider</code> ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
     <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">AuthenticationProvider</span> <span class="token function">daoAuthenticationProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">DaoAuthenticationProvider</span> daoAuthenticationProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DaoAuthenticationProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daoAuthenticationProvider<span class="token punctuation">.</span><span class="token function">setPasswordEncoder</span><span class="token punctuation">(</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‡ªåŠ¨è§£å¯†éœ€è¦å‘Šè¯‰ Provider ç”¨ä»€ä¹ˆåŠ å¯†ç®—æ³•</span>
        daoAuthenticationProvider<span class="token punctuation">.</span><span class="token function">setUserDetailsService</span><span class="token punctuation">(</span>userService<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹æ¯”ä¿¡æ¯éœ€è¦å‘Šè¯‰ Provider æ€ä¹ˆé€šè¿‡ç”¨æˆ·åæŸ¥æ‰¾æ•°æ®åº“</span>
        <span class="token keyword">return</span> daoAuthenticationProvider<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æä¾›ä¸€ä¸ª authenticate æ–¹æ³•ä½œä¸ºæˆæƒçš„å…¥å£ï¼Œauthenticate è¿æ¥åˆ° AuthenticationProvider è¿›è¡Œæˆæƒ</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">AuthenticationManager</span> <span class="token function">authenticationManager</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationProvider</span> authenticationProvider<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// ProviderManager æ˜¯ AuthenticationManager æ¥å£çš„å®ç°ç±»</span>
        <span class="token class-name">ProviderManager</span> providerManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProviderManager</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>authenticationProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> providerManager<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œé¦–å…ˆéœ€è¦åˆ†æ¸…æ¥šæ¥å£å’Œå®ç°ç±»ï¼š</p><ul><li><code>AuthenticationManager</code> æ˜¯æ¥å£ ï¼Œ <code>ProviderManager</code> æ˜¯å…¶å®ç°ç±»</li><li><code>AuthenticationProvider</code> æ˜¯æ¥å£ï¼Œ <code>DaoAuthenticationProvider</code> æ˜¯å…¶å®ç°ç±»</li></ul><p>äº†è§£æ•´ä¸ªè¿‡ç¨‹æœ‰åŠ©äºç†è§£ä¸Šé¢çš„ä»£ç ï¼š</p><p><img src="https://linyc.oss-cn-beijing.aliyuncs.com/sequence-authenticationManager.png" alt=""></p><p>è‡³æ­¤ï¼Œæ•´ä¸ªåŠŸèƒ½æ­å»ºå®Œæ¯•ã€‚<a href="https://github.com/Lemonnnnnnnnnnn/spring-boot-3-jwt-security" target="_blank" rel="noopener noreferrer">æºç <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1041707577@qq.com">linyuchen</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/vuepress-next-blog/java/470.Spring-Data-JPA.html" class="" aria-label="Spring-Data-JPA"><!--[--><!--]--> Spring-Data-JPA <!--[--><!--]--></a></span><span class="next"><a href="/vuepress-next-blog/java/600.%E4%B8%80%E4%BA%9B%E5%90%8D%E8%AF%8D.html" class="" aria-label="ä¸€äº›åè¯"><!--[--><!--]--> ä¸€äº›åè¯ <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vuepress-next-blog/assets/app-49117bc2.js" defer></script>
  </body>
</html>
